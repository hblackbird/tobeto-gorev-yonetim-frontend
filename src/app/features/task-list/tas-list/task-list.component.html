<div class="container mx-auto p-4">
  <h1 class="text-2xl font-bold mb-4 text-center">Görev Listesi</h1>

  <div class="flex justify-end mb-4">
    <label for="sortBy" class="mr-2 text-sm font-bold">Sıralama:</label>
    <select id="sortBy" [(ngModel)]="sortByOption" (change)="applyFiltersAndSorting()" class="p-2 border rounded">
      <option value="createdDateAsc">En Eski Tarihten Yeni Tarihe</option>
      <option value="createdDateDesc">En Yeni Tarihten Eski Tarihe</option>
    </select>
  </div>

  <table class="min-w-full bg-white text-center">
    <thead>
      <tr>
        <th class="py-2 px-4 border-b">Title</th>
        <th class="py-2 px-4 border-b">Description</th>
        <th class="py-2 px-4 border-b">Status</th>
        <th class="py-2 px-4 border-b">Created Date</th>
        <th class="py-2 px-4 border-b">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let gorev of filteredGorevler">
        <td class="py-2 px-4 border-b">{{ gorev.title }}</td>
        <td class="py-2 px-4 border-b">{{ gorev.description }}</td>
        <td class="py-2 px-4 border-b">{{ getStatusText(gorev.status) }}</td>
        <td class="py-2 px-4 border-b">{{ gorev.createdDate }}</td>
        <td class="py-2 px-4 border-b">
          <button (click)="editGorev(gorev)" class="bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-700 mx-1">Düzenle</button>
          <button (click)="deleteGorev(gorev.id)" class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-700 mx-1">Sil</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50" *ngIf="isModalVisible">
    <div class="bg-white p-6 rounded shadow-lg max-w-md w-full">
      <h2 class="text-xl font-bold mb-4">Görev Düzenle</h2>
      <form [formGroup]="editForm">
        <div class="flex flex-col mb-4">
          <label for="title" class="mb-1 text-sm font-bold">Title</label>
          <input id="title" formControlName="title" class="p-2 border rounded" type="text" />
        </div>
        <div class="flex flex-col mb-4">
          <label for="description" class="mb-1 text-sm font-bold">Description</label>
          <input id="description" formControlName="description" class="p-2 border rounded" type="text" />
        </div>
        <div class="flex flex-col mb-4">
          <label for="status" class="mb-1 text-sm font-bold">Status</label>
          <select id="status" formControlName="status" class="p-2 border rounded" [(ngModel)]="editForm.value.status">
            <option [ngValue]="statusOption.value" *ngFor="let statusOption of statusOptions">{{ statusOption.label }}</option>
          </select>
        </div>
        
        <div class="flex justify-end">
          <button (click)="close()" type="button" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-700 mr-2">Cancel</button>
          <button (click)="save()" type="button" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>
